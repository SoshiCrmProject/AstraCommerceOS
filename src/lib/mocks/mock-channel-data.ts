import {
  type ChannelConnectionSummary,
  type ChannelDetailSnapshot,
  type ChannelListingSummary,
  type ChannelOrderSummary,
  type ChannelPerformancePoint,
  type ChannelSyncLog,
  type ChannelSyncPreferences,
} from "@/lib/services/channel-types";

const performanceTimeline: ChannelPerformancePoint[] = [
  { date: "2025-01-29", revenue: 228000, orders: 1260, profit: 64000 },
  { date: "2025-01-30", revenue: 236000, orders: 1310, profit: 68000 },
  { date: "2025-01-31", revenue: 242000, orders: 1335, profit: 70500 },
  { date: "2025-02-01", revenue: 251000, orders: 1390, profit: 74200 },
  { date: "2025-02-02", revenue: 265000, orders: 1480, profit: 81000 },
  { date: "2025-02-03", revenue: 272000, orders: 1525, profit: 84600 },
  { date: "2025-02-04", revenue: 281000, orders: 1580, profit: 89800 },
  { date: "2025-02-05", revenue: 276000, orders: 1540, profit: 87200 },
  { date: "2025-02-06", revenue: 288000, orders: 1610, profit: 92400 },
  { date: "2025-02-07", revenue: 295000, orders: 1650, profit: 95800 },
];

const defaultSyncPreferences: ChannelSyncPreferences = {
  autoSync: {
    products: true,
    inventory: true,
    orders: true,
    pricing: true,
    reviews: false,
  },
  cadenceMinutes: {
    products: 60,
    inventory: 15,
    orders: 10,
    pricing: 45,
    reviews: 120,
  },
  notifyOnFailure: true,
};

export const mockChannelList: ChannelConnectionSummary[] = [
  {
    id: "amazon-jp",
    name: "Amazon Japan",
    type: "AMAZON",
    region: "JP",
    status: "HEALTHY",
    icon: "amazon",
    accountId: "JP-SELLER-1182",
    accountType: "Seller Central",
    revenue7d: 1820000,
    revenue30d: 6520000,
    orders7d: 54000,
    orders30d: 186000,
    margin7d: 32,
    buyBoxShare: 82,
    lastSyncAt: "2025-02-07T02:16:00Z",
    nextSyncAt: "2025-02-07T02:26:00Z",
    connectedAt: "2024-11-01T00:00:00Z",
    tags: ["JP", "FBA", "High volume"],
  },
  {
    id: "shopify-d2c",
    name: "Shopify D2C",
    type: "SHOPIFY",
    region: "Global",
    status: "HEALTHY",
    icon: "shopify",
    accountId: "SHOP-9822",
    accountType: "Admin API",
    revenue7d: 780000,
    revenue30d: 2800000,
    orders7d: 22100,
    orders30d: 74200,
    margin7d: 35,
    buyBoxShare: 0,
    lastSyncAt: "2025-02-07T02:12:00Z",
    nextSyncAt: "2025-02-07T02:22:00Z",
    connectedAt: "2024-09-10T00:00:00Z",
    tags: ["Global", "D2C", "High margin"],
    new: true,
  },
  {
    id: "rakuten",
    name: "Rakuten",
    type: "RAKUTEN",
    region: "JP",
    status: "DEGRADED",
    icon: "rakuten",
    accountId: "RAKU-3159",
    accountType: "Marketplace API",
    revenue7d: 264000,
    revenue30d: 940000,
    orders7d: 8400,
    orders30d: 29400,
    margin7d: 29,
    buyBoxShare: 69,
    lastSyncAt: "2025-02-07T01:56:00Z",
    nextSyncAt: "2025-02-07T02:26:00Z",
    connectedAt: "2024-08-14T00:00:00Z",
    tags: ["JP", "FBM"],
  },
  {
    id: "tiktok-shop",
    name: "TikTok Shop",
    type: "TIKTOK_SHOP",
    region: "SEA",
    status: "DISCONNECTED",
    icon: "tiktok",
    accountId: "TT-SEA-442",
    accountType: "Seller",
    revenue7d: 218000,
    revenue30d: 764000,
    orders7d: 6900,
    orders30d: 26000,
    margin7d: 24,
    buyBoxShare: 0,
    lastSyncAt: null,
    nextSyncAt: null,
    connectedAt: "2024-10-01T00:00:00Z",
    tags: ["SEA", "High growth"],
  },
];

const listings: ChannelListingSummary[] = [
  {
    id: "lst-1",
    sku: "SKU-1001",
    productName: "Ergonomic Office Chair Pro",
    status: "ACTIVE",
    price: 24800,
    currency: "JPY",
    stock: 320,
    orders7d: 1320,
    buyBoxShare: 84,
  },
  {
    id: "lst-2",
    sku: "SKU-1002",
    productName: "Wireless ANC Headphones",
    status: "ACTIVE",
    price: 15800,
    currency: "JPY",
    stock: 42,
    orders7d: 890,
    buyBoxShare: 72,
  },
  {
    id: "lst-3",
    sku: "SKU-1004",
    productName: "Smart Kettle Pro",
    status: "OUT_OF_STOCK",
    price: 9800,
    currency: "JPY",
    stock: 0,
    orders7d: 120,
    buyBoxShare: 0,
  },
  {
    id: "lst-4",
    sku: "SKU-1010",
    productName: "4K Studio Monitor 27\"",
    status: "PENDING",
    price: 39800,
    currency: "JPY",
    stock: 120,
    orders7d: 220,
    buyBoxShare: 61,
  },
  {
    id: "lst-5",
    sku: "SKU-1012",
    productName: "Thermal Label Printer Plus",
    status: "ACTIVE",
    price: 17800,
    currency: "JPY",
    stock: 810,
    orders7d: 410,
    buyBoxShare: 74,
  },
];

const syncLogs: ChannelSyncLog[] = [
  {
    id: "sync-1",
    kind: "PRODUCTS",
    status: "SUCCESS",
    startedAt: "2025-02-07T02:10:00Z",
    finishedAt: "2025-02-07T02:11:00Z",
    itemCount: 1240,
  },
  {
    id: "sync-2",
    kind: "ORDERS",
    status: "PARTIAL",
    startedAt: "2025-02-07T02:05:00Z",
    finishedAt: "2025-02-07T02:06:30Z",
    itemCount: 480,
    errorMessage: "Timeout on 32 orders from Rakuten API",
  },
  {
    id: "sync-3",
    kind: "PRICING",
    status: "RUNNING",
    startedAt: "2025-02-07T02:15:00Z",
    finishedAt: null,
    itemCount: undefined,
  },
  {
    id: "sync-4",
    kind: "INVENTORY",
    status: "FAILED",
    startedAt: "2025-02-06T23:50:00Z",
    finishedAt: "2025-02-06T23:51:10Z",
    itemCount: 320,
    errorMessage: "Rate limited on inventory adjustments",
  },
  {
    id: "sync-5",
    kind: "REVIEWS",
    status: "SUCCESS",
    startedAt: "2025-02-06T22:40:00Z",
    finishedAt: "2025-02-06T22:41:20Z",
    itemCount: 280,
  },
];

const orders: ChannelOrderSummary[] = [
  {
    id: "ORD-8451",
    orderedAt: "2025-02-06T13:12:00Z",
    status: "PENDING",
    totalAmount: 18220,
    currency: "JPY",
    fulfillment: "FBA",
    sla: "ON_TIME",
  },
  {
    id: "ORD-8452",
    orderedAt: "2025-02-06T11:00:00Z",
    status: "SHIPPED",
    totalAmount: 6480,
    currency: "JPY",
    fulfillment: "FBM",
    sla: "ON_TIME",
  },
  {
    id: "ORD-8453",
    orderedAt: "2025-02-05T09:21:00Z",
    status: "RETURNED",
    totalAmount: 12840,
    currency: "JPY",
    fulfillment: "OWN",
    sla: "LATE",
  },
  {
    id: "ORD-8454",
    orderedAt: "2025-02-05T06:18:00Z",
    status: "DELIVERED",
    totalAmount: 21200,
    currency: "JPY",
    fulfillment: "FBA",
    sla: "ON_TIME",
  },
  {
    id: "ORD-8455",
    orderedAt: "2025-02-04T18:03:00Z",
    status: "CANCELED",
    totalAmount: 9800,
    currency: "JPY",
    fulfillment: "FBM",
    sla: "ON_TIME",
  },
];

export const mockChannelDetails: Record<string, ChannelDetailSnapshot> = {
  "amazon-jp": {
    channel: mockChannelList[0],
    health: {
      apiLatencyMs: 420,
      uptime30dPercent: 99.94,
      syncSuccessRate30d: 99.4,
      pendingJobs: 2,
      lastErrorAt: "2025-02-05T11:12:00Z",
      lastErrorMessage: "One pricing update failed due to rate limit.",
      incidentCount24h: 1,
    },
    financials: {
      revenue7d: 1820000,
      revenue30d: 6520000,
      fees7d: 182000,
      fees30d: 642000,
      refunds7d: 32000,
      refunds30d: 182000,
      profit7d: 520000,
      profit30d: 1980000,
      orders7d: 54000,
      orders30d: 186000,
      avgOrderValue: 34,
      marginRate7d: 28.6,
      marginRate30d: 30.3,
    },
    recentSyncs: syncLogs,
    topListings: listings,
    orders,
    timeline: performanceTimeline,
    syncPreferences: defaultSyncPreferences,
  },
  "shopify-d2c": {
    channel: mockChannelList[1],
    health: {
      apiLatencyMs: 280,
      uptime30dPercent: 99.98,
      syncSuccessRate30d: 99.7,
      pendingJobs: 1,
      lastErrorAt: null,
      lastErrorMessage: null,
      incidentCount24h: 0,
    },
    financials: {
      revenue7d: 780000,
      revenue30d: 2800000,
      fees7d: 72000,
      fees30d: 262000,
      refunds7d: 18000,
      refunds30d: 98000,
      profit7d: 280000,
      profit30d: 920000,
      orders7d: 22100,
      orders30d: 74200,
      avgOrderValue: 35.3,
      marginRate7d: 35.9,
      marginRate30d: 32.8,
    },
    recentSyncs: syncLogs,
    topListings: listings,
    orders,
    timeline: performanceTimeline.map((point, idx) => ({
      ...point,
      revenue: point.revenue * 0.78 + idx * 1200,
      orders: Math.round(point.orders * 0.82),
      profit: point.profit * 0.76 + idx * 600,
    })),
    syncPreferences: {
      ...defaultSyncPreferences,
      autoSync: { ...defaultSyncPreferences.autoSync, reviews: true },
      cadenceMinutes: { ...defaultSyncPreferences.cadenceMinutes, pricing: 30 },
    },
  },
  "rakuten": {
    channel: mockChannelList[2],
    health: {
      apiLatencyMs: 890,
      uptime30dPercent: 98.4,
      syncSuccessRate30d: 94.8,
      pendingJobs: 5,
      lastErrorAt: "2025-02-06T23:50:00Z",
      lastErrorMessage: "Order sync degraded from Rakuten API.",
      incidentCount24h: 3,
    },
    financials: {
      revenue7d: 264000,
      revenue30d: 940000,
      fees7d: 32000,
      fees30d: 140000,
      refunds7d: 12000,
      refunds30d: 46000,
      profit7d: 84000,
      profit30d: 320000,
      orders7d: 8400,
      orders30d: 29400,
      avgOrderValue: 31.4,
      marginRate7d: 31.8,
      marginRate30d: 34,
    },
    recentSyncs: syncLogs,
    topListings: listings,
    orders,
    timeline: performanceTimeline.map((point) => ({
      ...point,
      revenue: point.revenue * 0.34,
      orders: Math.round(point.orders * 0.36),
      profit: point.profit * 0.31,
    })),
    syncPreferences: {
      ...defaultSyncPreferences,
      autoSync: { ...defaultSyncPreferences.autoSync, reviews: false, pricing: true },
      cadenceMinutes: { ...defaultSyncPreferences.cadenceMinutes, inventory: 30, orders: 20 },
    },
  },
  "tiktok-shop": {
    channel: mockChannelList[3],
    health: {
      apiLatencyMs: 0,
      uptime30dPercent: 92.4,
      syncSuccessRate30d: 82.1,
      pendingJobs: 0,
      lastErrorAt: "2025-02-04T10:20:00Z",
      lastErrorMessage: "Token expired â€“ awaiting reconnection.",
      incidentCount24h: 4,
    },
    financials: {
      revenue7d: 218000,
      revenue30d: 764000,
      fees7d: 46000,
      fees30d: 142000,
      refunds7d: 18000,
      refunds30d: 52000,
      profit7d: 52000,
      profit30d: 186000,
      orders7d: 6900,
      orders30d: 26000,
      avgOrderValue: 31.6,
      marginRate7d: 23.8,
      marginRate30d: 24.3,
    },
    recentSyncs: syncLogs,
    topListings: listings,
    orders,
    timeline: performanceTimeline.map((point) => ({
      ...point,
      revenue: point.revenue * 0.29,
      orders: Math.round(point.orders * 0.32),
      profit: point.profit * 0.24,
    })),
    syncPreferences: {
      ...defaultSyncPreferences,
      autoSync: { ...defaultSyncPreferences.autoSync, pricing: false, reviews: false },
      notifyOnFailure: false,
    },
  },
};
